!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.photoswippy=e()}(this,function(){"use strict";var t,e,n,o,i=0,r={},p=function(t){return Array.prototype.slice.call(t)},a=function(t,e){return t&&(e(t)?t:a(t.parentNode,e))},l=Object.assign||function(t){var e=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var i=e[o];if(void 0!==i&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])}return n},s=function(t,e){return(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector).call(t,e)},c=function(t){for(var e=0;(t=t.previousElementSibling)&&++e;);return e},u=function(t){return function(e){if(t){var n=window.pageYOffset||document.documentElement.scrollTop,o=t.getBoundingClientRect();return{x:o.left,y:o.top+n,w:o.width}}}},f=function(n,i,r){r=r||n.items[i].el.offsetParent&&n.items[i].el.getElementsByTagName("img")[0];var p=l({},n.options,{index:i,getThumbBoundsFn:u(r)}),a=new t(o,e,n.items,p);a.listen("gettingData",function(t,e){if(!e.w||!e.h){var n=e.el.getElementsByTagName("img")[0];n&&(e.w=n.width,e.h=n.height);var o=new Image;o.onload=function(){e.w=this.width,e.h=this.height,a.updateSize(!0)},o.src=e.src}}),a.init()},d=function(t){return function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var n=e.target||e.srcElement,o=a(n,function(e){return 1===e.nodeType&&s(e,t.options.itemSelector)});if(o){for(var i=o;i.parentNode!==t.el;)i=i.parentNode;var r=c(i);r>=0&&f(t,r,o)}}},w=function(t,e){var o=t.dataset.pswp;null!=o&&""!==o&&(e=JSON.parse(o));var r=l({galleryUID:t.dataset.pswpId||"gallery-"+ ++i},n,e),a=p(t.querySelectorAll(r.itemSelector)).map(function(t){var e=(t.dataset.pswpSize||"").split("x"),n=e[0],o=e[1],i=t.querySelector(r.captionSelector),p=t.getElementsByTagName("img")[0];return{el:t,src:t.dataset.pswpSrc||t.href,w:n||t.dataset.pswpWidth||0,h:o||t.dataset.pswpHeight||0,title:t.dataset.pswpTitle||i&&i.innerHTML||p&&p.alt||""}});return{el:t,options:r,items:a}},h=function(){var t=window.location.hash.substring(1).split("&").reduce(function(t,e){if(e.length){var n=e.split("="),o=n[0],i=n[1];t[o]=i}return t},{});t.pid&&t.gid&&r[t.gid]&&f(r[t.gid],t.pid-1)},m=function(){p(document.querySelectorAll("[data-pswp-trigger]")).forEach(function(t){t.photoswippy||(t.photoswippy=!0,t.addEventListener("click",function(){f(r[this.dataset.pswpTrigger],0,this)}))})},g=function(n,o){if(!t||!e)throw Error("[PhotoSwippy] Must initialize photoswipe with PhotoSwippy.init()");("string"==typeof n?p(document.querySelectorAll(n)):[n]).forEach(function(t){if(!t.photoswippy){var e=w(t,o);t.photoswippy=!0,t.addEventListener("click",d(e)),r[e.options.galleryUID]=e}}),h(),m()};return{init:function(i,r,p){if(void 0===i&&(i=window.PhotoSwipe),void 0===r&&(r=window.PhotoSwipeUI_Default),t=i,e=r,n=l({itemSelector:"a",captionSelector:"figcaption"},p),!(o=document.querySelector(".pswp")))throw Error("[PhotoSwippy] Photoswipe template (Element with .pswp class) not found.");g("[data-pswp]")},build:g}});
