!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.photoswippy=t()}(this,function(){"use strict";var e,t,o,n,r=function(e){return Array.prototype.slice.call(e)},i=function(e,t){return e&&(t(e)?e:i(e.parentNode,t))},a=function(e,t,o){var n=new Image;n.onload=function(){return t(n)},o&&(n.onerror=function(){return o(n)}),n.src=e},p=function(e){for(var t=0;e=e.previousElementSibling;)++t;return t},s=function(e,t){return(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector).call(e,t)},l=function(){return window.location.hash.substring(1).split("&").reduce(function(e,t){if(t.length){var o=t.split("="),n=o[0],r=o[1];e[n]=r}return e},{})},c=Object.assign||function(e){var t=arguments;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),n=1;n<arguments.length;n++){var r=t[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])}return o},u=0,d={},f={indexSelector:null,itemSelector:"a",captionSelector:"figcaption",hoverPreload:!1,useMsrc:!0},w=function(o,r,i){i=i||o.items[r].el.querySelector("img")||{offsetWidth:0,offsetHeight:0};var p=!0,s=c({},o.options,{index:r,getThumbBoundsFn:function(e){if(i.nodeType&&i.offsetParent){var t=i,n=e>=0&&e<o.items.length;if(!p&&n){var r=o.items[e].el;r.nodeType&&r.offsetParent&&(t=r)}p=!1;var a=window.pageYOffset||document.documentElement.scrollTop,s=t.getBoundingClientRect();return{x:s.left,y:s.top+a,w:s.width}}}}),l=new e(n,t,o.items,s);l.listen("gettingData",function(e,t){t.w&&t.h||(t.w=i.offsetWidth,t.h=i.offsetHeight,s.hoverPreload&&t.preloadState||a(t.src,function(e){t.w=e.width,t.h=e.height,l.updateSize(!0)}))}),l.init()},h=function(e){return function(t){t.preventDefault();var o=i(t.target,function(t){return 1===t.nodeType&&s(t,e.options.itemSelector)});if(o){var n=i(o,"string"==typeof e.options.indexSelector?function(t){return s(t,e.options.indexSelector)}:function(t){return t.parentNode===e.el}),r=p(n);w(e,r,o)}}},v=function(e,t){if(void 0===t&&(t={}),e.dataset.pswpOptions)t=JSON.parse(e.dataset.pswpOptions);else{var n=Object.keys(e.dataset).filter(function(e){return 0===e.indexOf("pswp")&&"pswp"!==e});n.length>0&&n.forEach(function(o){var n=o[4].toLowerCase()+o.substring(5);t[n]=e.dataset[o]||!0})}var i=c({galleryUID:e.dataset.pswpId||e.dataset.pswp||"gallery-"+u},o,t);e.dataset.pswp=i.galleryUID;var p=r(e.querySelectorAll(i.itemSelector)).map(function(e){var t=e.querySelector("img"),o=e.querySelector(i.captionSelector)||{},n=(e.dataset.pswpSize||"").toLowerCase().split("x").map(parseInt),r=n[0],p=n[1],s=r||e.dataset.pswpWidth||0,l=p||e.dataset.pswpHeight||0,c=e.dataset.pswpCaption||o.innerHTML||"",u=e.dataset.pswpSrc||e.href,d={el:e,src:u,w:s,h:l,title:c};return t&&i.useMsrc&&(d.msrc=t.src),i.hoverPreload&&e.addEventListener("mouseover",function t(o){d.preloadState||(d.preloadState=1,a(u,function(o){d.preloadState=2,d.w=o.width,d.h=o.height,e.removeEventListener("mouseover",t)},function(){d.preloadState=0,e.removeEventListener("mouseover",t)}))}),d}),s={el:e,options:i,items:p};return e.addEventListener("click",h(s)),s},g=function(o,n){if(e&&t||console.error('[PhotoSwippy] PhotoSwipe and PhotoSwipeUI libraries were not found. Was "PhotoSwippy.init()" called?'),o){("string"==typeof o?r(document.querySelectorAll(o)):[o]).forEach(function(e){if(!e.photoswippy){u++;var t=v(e,n);e.photoswippy=!0,d[t.options.galleryUID]=t}});var i=l();i.pid&&i.gid&&d[i.gid]&&w(d[i.gid],i.pid-1,null),m()}},m=function(){r(document.querySelectorAll("[data-pswp-trigger]")).forEach(function(e){e.photoswippy||(e.photoswippy=!0,e.addEventListener("click",function(){var e=d[this.dataset.pswpTrigger];e?w(e,-1,this):console.error("[PhotoSwippy] Gallery with id '"+this.dataset.pswpTrigger+"' not found.")}))})};return{init:function(r,i,a){void 0===r&&(r=window.PhotoSwipe),void 0===i&&(i=window.PhotoSwipeUI_Default),e=r,t=i,o=c(f,a),(n=document.querySelector(".pswp"))||console.error("[PhotoSwippy] Photoswipe template (Element with .pswp class) not found."),g("[data-pswp]")},build:g}});
