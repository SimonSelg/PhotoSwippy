!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.photoswippy=e()}(this,function(){"use strict";var t,e,o,n,i=function(t){return Array.prototype.slice.call(t)},r=function(t,e){return t&&(e(t)?t:r(t.parentNode,e))},p=function(t){for(var e=0;t=t.previousElementSibling;)++e;return e},a=function(t,e){return(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector).call(t,e)},s=function(){return window.location.hash.substring(1).split("&").reduce(function(t,e){if(e.length){var o=e.split("="),n=o[0],i=o[1];t[n]=i}return t},{})},l=Object.assign||function(t){var e=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),n=1;n<arguments.length;n++){var i=e[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(o[r]=i[r])}return o},c=0,u={},f={indexSelector:null,itemSelector:"a",captionSelector:"figcaption"},d=function(o,i,r){var p=r||o.items[i].el.querySelector("img")||{offsetWidth:0,offsetHeight:0},a=l({},o.options,{index:i,getThumbBoundsFn:function(t){if(p.nodeType&&p.offsetParent){var e=window.pageYOffset||document.documentElement.scrollTop,o=p.getBoundingClientRect();return{x:o.left,y:o.top+e,w:o.width}}}}),s=new t(n,e,o.items,a);s.listen("gettingData",function(t,e){if(!e.w||!e.h){e.w=p.offsetWidth,e.h=p.offsetHeight;var o=new Image;o.onload=function(){e.w=this.width,e.h=this.height,s.updateSize(!0)},o.src=e.src}}),s.init()},w=function(t){return function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var o=r(e.target||e.srcElement,function(e){return 1===e.nodeType&&a(e,t.options.itemSelector)});if(o){var n=r(o,"string"==typeof t.options.indexSelector?function(e){return a(e,t.options.indexSelector)}:function(e){return e.parentNode===t.el}),i=p(n);d(t,i)}}},h=function(t,e){void 0===e&&(e={}),c++;var n=t.dataset.pswpOptions;if(null!=n&&""!==n)e=JSON.parse(n);else{var r=Object.keys(t.dataset).filter(function(t){return 0===t.indexOf("pswp")&&"pswp"!==t});r.length>0&&r.forEach(function(o){var n=o[4].toLowerCase()+o.substring(5);t.dataset[o]&&(e[n]=t.dataset[o])})}var p=l({galleryUID:t.dataset.pswpId||t.dataset.pswp||"gallery-"+c},o,e);t.dataset.pswp=p.galleryUID;var a=i(t.querySelectorAll(p.itemSelector)).map(function(t){var e=t.querySelector(p.captionSelector)||{},o=(t.dataset.pswpSize||"").toLowerCase().split("x").map(parseInt),n=o[0],i=o[1],r=n||t.dataset.pswpWidth||0,a=i||t.dataset.pswpHeight||0,s=t.dataset.pswpCaption||e.innerHTML||"";return{el:t,src:t.dataset.pswpSrc||t.href,w:r,h:a,title:s}});return{el:t,options:p,items:a}},y=function(){i(document.querySelectorAll("[data-pswp-trigger]")).forEach(function(t){t.photoswippy||(t.photoswippy=!0,t.addEventListener("click",function(){var t=u[this.dataset.pswpTrigger];t?d(t,0,this):console.error("[PhotoSwippy] Gallery with id '"+this.dataset.pswpTrigger+"' not found.")}))})},g=function(o,n){if(t&&e||console.error('[PhotoSwippy] PhotoSwipe and PhotoSwipeUI libraries were not found. Was "PhotoSwippy.init()" called?'),o){("string"==typeof o?i(document.querySelectorAll(o)):[o]).forEach(function(t){if(!t.photoswippy){var e=h(t,n);t.photoswippy=!0,t.addEventListener("click",w(e)),u[e.options.galleryUID]=e}});var r=s();r.pid&&r.gid&&u[r.gid]&&d(u[r.gid],r.pid-1,null),y()}};return{init:function(i,r,p){void 0===i&&(i=window.PhotoSwipe),void 0===r&&(r=window.PhotoSwipeUI_Default),t=i,e=r,o=l(f,p),(n=document.querySelector(".pswp"))||console.error("[PhotoSwippy] Photoswipe template (Element with .pswp class) not found."),g("[data-pswp]")},build:g}});
